let song = "data:audio/midi;base64,TVRoZAAAAAYAAAABAYBNVHJrAAAs/AD/UQMH0zQA/wMAALBAfwCQMhQHKxaBCYArQA8yQHKQNx9AgDdAgUKQNyowgDdAgUCQMh8DKxkwgDJAACtAgU2QMhgIKxh2gCtAADJAgQKQNyI4gDdAgTWQKyELMikdsEAAgRuAK0AysEB/A5A3JgOAMkAwN0CBSJA3JzOAN0CBLJAyHAgrHS+AMkAAK0CBO7BAAACQKxsAMhiBDoArQBqwQH8sgDJAJZA3HzqAN0CBLbBAABuQKxwPMhuBL4ArQBawQH8LkDccJYAyQBs3QIFIkDcWR4A3QIEqkDINACsNP4ArQAMyQIEkkDIcACsZCbBAAHqAK0AisEB/H4AyQCGQNxtIgDdAgRewQAAXkCseBTIcgQiAK0AosEB/N4AyQAaQNxk/gDdAgUCQNx08gDdAgRyQKw0IMhA7gCtABzJAgRWwQAAQkDIWDSsefoArQACwQH8ogDJAP5A3GziAN0CBJ5BBORA5JQQ8KAMrHCEyDRuwQAB5gCtALjJABJA3IR+wQH8ngDdAgT2wQAAQkDcZgQGwQH8HgDdAZZArERAyDkqAK0AFMkB6OUAhkDoYBjIRAD4iEisUGbBAAC+APEAjQUAnK0A5MkAAsEB/I5A3CheAOkAFPkAnN0CBHZBBMwA8MwQ5Lw0yIQArHVawQABqgCtAFZA3MC6AMkAHsEB/FYA3QIFQkDccYYA3QHmQKx4HMho7gCtABjJAgQg5QDOQKx4FOhMFMhkHPh4HsEAAUYA8QCJBQDorQBwyQA+wQH8VkDcUM4A+QAA6QAg3QIE1kEE/CCseBjwmADkQCzIQerBAAEmAK0ApkDchEbBAfxaAMkAhN0AzOUAZPEBwkD88E4BBQASQNxhHgDdAO5BBMAWAP0BVkD8uBIBBQBWQMg46gD9ADjJABpBBMF6AQUAhkD83OTIMDSsVQbBAABKAP0AGkD4wCzoagRGAK0AvkDceB4AyQBKwQH8igDdAgUSQMhwKKyMksEAAgRWAK0AykDcgLoAyQAawQH8PgDdAgV6QNxVAgDdAgRGQKxYUMhA3gCtACzJAgQCwQAAakDIdGCsie4ArQCqwQH8TgDJAO5A3EAiAPkAMOkAuN0CBV5BBKws5IgsrFwQ8GxawQAALkDILgSKAK0AgsEB/AJA3ISCAMkAkN0CBQJA3HTiAN0CBP5ArEREyDzOAK0ANMkBXOUBnsEAAAJAyBAM6EwUrFAg+HEaAQUAAPEBPK0AnsEB/G4AyQBSQNw4sgD5AHTdABzpAgQ6QQSgLOSUAPCkHMhkEKxGBSbBAAAuQNzA5gDdAELBAfwCAK0ApMkCBFJA3HDmAN0CBLpArFgYyFz6AK0AAMkB1OUBFkDIOADoQACsiCT4iC7BAAEKAPEAIQUBPK0AQsEB/C4AyQC6QNxUNgD5AKDpABTdAgUWQQSsAMiADKyUOORQMPA9NsEAARoAyQEkrQA2wQH8ZkDcpO4A3QBE5QAM8QIFNkD8+GYBBQBKQNxtHgDdAIJBBPAOAP0BZQUAVkD8nCzIcBysGMYA/QAAyQAsrQBmQQR02gEFAHJA/MVawQAAIkDIVACseIoA/QAaQPjAOOiJygCtAJ7BAfxyAMkAdkDcVOYA3QIE/kCsgDjIZgQ+AK0BGMkATkDcMQ4A3QIEzkDcWTYA3QIEnkCsNCzIONYArQAsyQIEfkDITHSsXQoArQDMyQGOQNxQ1gDdAgQ6wQAAfkCsiDjIdgQ6AK0ARsEB/H4AyQCyQNxg4gDdAgU2QNx87gDdAgSSQKxIEMhg8gCtAADJAgSiwQAANkDINACscbYArQAmwQH8vgDJACTpADj5AUJA3EVOAN0CCKZBGIQorDgCwQAAXkDIWBUMTgQ+AK0AVsEB/FoAyQEmQNwUvgDdAgSqQNxo9gDdAgSaQKxgjMgUTgCtAFzJAgRaQSDgAgENACZBFJA0yCw4rFyCARkAuMkAMK0CBAJA3HTqAN0CBPpArHwBKPABGIwuARUADsEAACJAyDxmASECBFytAE7BAfyGAMkAEkDcWCoBKQA5GQDI3QIFakDceEUYvA0pHOIA3QIEnkCsZCjIYOYArQAsyQIE6kDIWBSsaQIArQAwyQIE+kDcUNYBKQBY3QAdGQIIVkEYqBkpEEisSDzIPgQWAK0BLMkAXkDcWQ4A3QIFNkDcVT4A3QBxGQGmQSE8DRTAPKxMDMiA6gDJAA0pABCtAgRqQMhQDSlcDRjMFKxILsEAAA4BFQBlIQHIrQBqwQH8OgDJAJJA3HzqAN0AWRkCBHJBIQARFIwMrHgewQAAAkDIgJ4BKQIEGK0AGsEB/MoBFQCJIQAMyQC+QNxs9gDdAgWKQNw8KRiYPQyA8gDdAgSKQKxsDMhY9gCtACzJAgSqQMhwJsEAABJArHYEJgCtAKLBAfw2AMkArkDcdPIA3QAtDQBpGQIEIkEhJAEU2AysXBTIWe7BAAFaAK0AVkDclL7BAfxCAMkAUN0CBPpA3IECAN0CBJJArGw0yGiqAK0ASMkCBI5BGOgBKURwyFgkrHguARUAUSEAusEAAR4ArQDkyQAyQNyQAsEB/FIBGQCs3QFFKQGiQKxsQMg8JRj4GQymBHLBAADSAK0AqkDceMrBAfwyAMkAWN0CBOJBFNA1CJAeARkAFQ0ARkDcbU4A3QCyQRjcEgEVAapArEAqARkAIkDIREkUvH4ArQAtCQAoyQChFQAWQRi9zRSYhgEZAC5AyFxErHC6wQAAukEMwE4BFQEwrQFawQH8OgDJACJA3FkiAN0CBKJArGwoyGYEPgCtARpA3IBCAMkA+N0CBMZA3JDuAN0CBOpArGgAyEzKAK0APMkCBCLBAACiQKyQOMhqBC4ArQAuwQH8cgDJAMZA3GD6AN0CBIbBAABqQMiIDKyCBFYArQAywQH80gDJACpA3FU2AN0CBPZA3IUSAN0BqQ0A9kCsSDTIVOYArQAUyQIEbsEAAFJAyEg4rF3OAK0AqsEB/DoAyQFWQNxNDgDdAggSQRhsDKxIdMg8DQxCBCYArQDAyQEiQNwVAgDdAgSWQNxFHgDdAgRGQKx4UMhAhgCtAIDJAgRNDQAuQSCgAMhcLRRkDKx0qsEAAKYBGQDkrQCkyQAWwQH8ZkDccS4A3QGNFQDKQRh8ASjMOsEAAA5ArGhiASEAMkDIOgQOAK0AKsEB/H4BKQAhGQAwyQACQNxhFgDdAgVSQNxIWSkAFRiQ5gDdAgTKQMhIIKwc1gCtAAzJAgSKQKxQHMhBfgCtABjJAfZA3GhKASkAWRkAWN0CBXJBGKABKQwYrGhUyEASwQACBJ4ArQCawQH8SkDcaEIAyQC03QIFCkDcXPIA3QIEmkEg7BisXAEUiEYBGQA6QMg8ZgEpACytAGzJAgQ6QMg0AKxYGSkcDRjUhgEVAErBAAAiASEBQK0BEMkAAsEB/E5A3IjeAN0AiRkCBCZArGwiwQAAFkEguBEUdADIeI4BKQIEIK0ALsEB/PoAyQABFQCJIQBGQNw9CgDdAgTWQNxMFRiEPQx1NgDdAUrBAADSQMhoAKyBRsEB/A4AyQAkrQIETkDIcBSsdX4ArQBMyQH6QNyNAgDdAKEZACkNAdZBIRwhFMwwrHBCwQAAAkDIUgSKAK0AesEB/CYAyQA6QNx87gDdAgT+QNyZBgDdAgSGQKxsAMiMzgCtABTJAgUCQMhcAKxkDRjoFSk8tgEVACEhAKrBAAFaAK0AiMkAOkDcpBYBGQASwQH9KgDdAgSuQKxwTMhIhSBgASy8UgEpALLBAAIEggCtACLBAfymQNyEXgDJAFkhADjdAC0tAgQ6QS0MLSCwZNyRigDdADpBNTw2AS0BzkEtIBTIVAIBNQBeQKwcsgDJACZBNOgaAK0ASS0A5SEAAkEs7HoBNQEaQKxENMhcVsEAANJBGGAVKPgOAS0CBACtAQDJAALBAfxSQNxdGgDdAgS+wQAADkCsXCTIWgRywQH8GgCtAWzJACJA3E1eAN0BbRkBYkEgsCkUYETchE4BKQDY3QIEZRUAmkEovAEYnBysQBTIPEYBIQCorQA0yQBFGQIEGkEgwDkUeADIUC7BAABaASkAAkCsVVoArQDCwQH8OgDJAHEhAA5BGJgeARUAHkEMfCDcTSIA3QA5DQBlGQG2wQAAKkEgmACsVBkUXGjISgSGAK0AAsEB/HIBFQDAyQBOQNxBAgEhAEDdAgWiQNxoURhoWQyIggDdAgTyQMhcDKxZHgDJAACtAgRGwQAAtkDIcACsbgR+wQH8FgCtAJTJAMZA3FzuAN0CBIrBAAAaQKyINMhqBFIArQBmwQH9AgDJAAJA3F0SAN0CBcZBFLwk3HwZCHgOARkAKQ0A2N0B/kEY+FIBFQFyQKxULMhUnRT0UgEZAACtACkJAADJAWZBGOAmARUBXkDIZBSsaBrBAAB6QRS8RgEZAdUVAAJBGMgWAK0AXsEB/XpBFKgCAMkADRkAkkDcVR4A3QBJFQAOQRiOBEUUYCYBGQH2wQAAJkCsLBzIQMYBFQACQQxuBP4ArQB+wQH8OkDcRLYAyQCk3QDhDQIEAkDcPToA3QIEOkCsTCTITSIAyQAYrQIEikDIYBCsTTIAyQBErQIEQkDceQ4A3QIE5kCsdDTITgRmAK0AhMkAlkDcaPYA3QIFGkDcdSYA3QIEjkCsQEjILOIArQBAyQIEtkDIPGCsLQ4AyQAArQIE2kDcXUIA3QIFDkDkRSTwRALBAABCQKxEfMhE2QR6BK4ArQAewQH8hgDJAJZA3DFCAN0CBMJA3GECAN0CBJpAyFQArEkCAK0AAMkCBKjlADrBAAASQPiIAOhQNKxwIMhQfgDxAEUFAYStAFrBAfxeAMkARPkAAOkAckDcZQIA3QFOQORk4PBgUKxoeMhIAsEAADJBBLYEugCtAH7BAfx+AMkAEkDcUSoA3QIE9kDcUPoA3QIEwkCsJBTILNIArQAk5QAAyQIEkkCsWBDIHFbBAAASQPhsDOhgsgEFACjxASitAFbBAfy6AMkAYPkADOkAOkDcXRYA3QIESkEErDisYCDknDTIWADweLrBAAIEVgCtAFLBAfwuQNxgWgDJAMzdAMjlAEDxAcJA/NheAQUAkkDcaZ4A3QBE/QAeQQS9OgEFANZAyEgArEAY/JTCAP0AKK0AEMkAVkEEeQIBBQByQPzQyKxIGMhM6sEAAJ5A+Lg86FwCAP0CBDitALJA3HhmAMkAAsEB/KIA3QIEtsEAAC5ArHwgyJIEmgCtAFLBAfzaAMkASkDcXPoA3QIE6kDckPoA3QIEXkCsUEDITMoArQAwyQIEQsEAAFJAyFhgrIHuAK0AZsEB/JYAyQB86QAs+QA6QNxNLgDdAgUKQORREPBoAsEAACJArEAgyEVxBJ4ERsEB/A4ArQEMyQA2QNxRGgDdAgTuQNxhAgDdAgS+QKwwLMg4ugDlADStACTJAgRGwQAAHkDoSBIA8QAuQKxMAMhEAPhU1gEFAXCtADbBAfxGAMkAsPkASOkAFkDcRQ4A3QGGQORVDKxQAPBwIsEAADpAyGDBBLIEGgCtAFbBAfyKAMkAMkDcXS4A3QIEnkDceSYA3QIEYkCsSFzIMCIA5QCQrQA8yQIErkDIQALBAABGQKxcGPhwOOhA6gDxAAEFARCtAHLBAfwqAMkAnPkAJOkAfkDcSQoA3QHOQQSgTKxkAORQOPBQRMhIpsEAAcoArQCqwQH8AkDcZBoAyQDo3QA85QCo8QHKQPywANxcDgEFAYzdALz9ABpBBJUSAQUAxkCsNDD8dDTIKL4A/QAYyQAMrQB6QQSc7gEFAOpA/ICIyChQrDT2wQAALgD9AJJA+IwA6FVSAK0BJMkAHkDcWBrBAfziAN0CBLLBAAASQKx4HMiGBGoArQBmwQH8igDJADZA3GT2AN0CBLZA3Hj6AN0CBHJArFgsyFzCAK0ANMkCBIbBAACKQKxcOMhp2gCtAALBAfxKAMkBrkDcUQIA3QIEUsEAAGZAyFwQrE4EMgCtAF7BAfw2AMkAzkDcPQ4A3QIEjkDccQYA3QIEXkCsPAzITOYArQAsyQIEisEAAJ5ArFQAyHGeAK0AZsEB/HIA6QBkyQAk+QEOQNyQvgDdAgi2QSkYIRhwMOgwAPhtOsEAAgRxAfxKAOkAHkDcVE4A+QCY3QIEikDcaO4A3QIEtkD4VBToNFIBGQCI+QBM6QIEpkDwXBjkTAEs7C0gjKoBKQCGwQACBC4A5QAawQH8hkDcVHYA8QC83QIETSEAAkE0wFTsMDTcQA0oWBbBAAB+AS0CBCbBAf1SQMiASgEpAAzdABjtAEU1AEzJAgTaQMiAjTUcGSjGBJ4AyQECQOxEJNxsxgDtAADdAgS6QOyANNxdIgDtARkpADjdAIU1AHZAyLS+AMkCBJJA3KwgyGwNKOwBNT4EtgDdALJAvIAaAMkBML0CBBZAvK36AL0B6kDcqAE9cCEs2ETIoHYBKQAdNQBcyQBA3QIEfkC8lCzIdD1BSBYBLQA6QTTYlgE9AQrBAAGyQKywXgDJAFy9AA7BAfxOATUAKK0CBIpArIwBPUgAvHAVLMASAUECBL5BQTxSAT0AZK0ANL0BDkDciBE9TDYBQQDo3QACQUEUVgE9APZBPTTGAUEAEkC0lCDAaJoBLQAuwQAAHkE5GC0o1GIBPQGgtQAqwQH91kCsrA4AwQDgrQIE9kCsmgR2AK0BIkDclM4A3QIEpkC0hCTAhAysggQuAK0BZkDcxFoAwQB43QAwtQIEekE9bBEs8Di8kACsqKYBKQCFOQFGwQABSkDcvFYArQCqwQH8dgDdADS9AgRyQTk8DLRwFMBwJSkQYgEtAAJArFzywQAAIgE9Ae7BAfwuQNxYWgCtAEzBABi1ASE5AFzdAgRyQTUMRSSIFMSIQKxgELxoggEpADLBAAIEGkE9IG4BNQBSwQH8egCtAPk9AA5A3HRBNPh2AL0APMUASN0AfTUADkE9DRE0xF4BPQB6QKyAAMBwfsEAACYBJQA2QTC8ESB4HgE1AgTUrQCCQNx0IgDBACrBAfzmAN0CBNZA3Gk6AN0CBGZAwFAYrEkOAMEADK0CBRZArGAYwEUiAMEAtK0B8kDcbRIA3QIEfkEkiB001CjEWAysYFrBAAAiQLxMDgEhAUExAQytAOrBAfwSQNxsZgDFAEi9AFzdAgUmQSyANSBYGMA0IKxAOsEAAGYBJQBlNQHErQB2wQH8jkDcNSIAwQB83QIFDSEAWkCsSA7BAAACQShQLMhUNRggrgEtAgScrQCCQNxcKsEB/JIAyQBg3QIFEkDcgN4A3QIEhkDIXBysOOYAyQAMrQIEakCsZEDIJQ4ArQAhKQA8yQBxGQGSQNxhAgDdAghGQRi4OQxsAKxchMhEUsEAAgQiAK0AUsEB/H4AyQA2QNxZFgDdAgSaQNxJqgDdAdJArGwgyFjKAK0AMMkCBLJBJOQAyEghFJgOAQ0AAkCsXSbBAAACARkBnK0AckDcnALBAfwyAMkA5N0CBPpArIQVGMQBKQgMyHAmwQAALgEVABklAgRErQB6wQH8egDJAAEpADJA3Fg6ARkAvN0CBT5A3IB5KTglGJBOAN0CBRpArIgUyHzeAK0APMkCBO5ArHgAyGEuAMkAKK0AXSkAZRkB1kDchPYA3QIEJkCshCzIYH0YvBUpQE7BAAIEGgCtAObBAfyCQNxwUgDJAJTdAgVCQNylUgDdAgQWQS08ISDcEMiYIKyATgEZAEUpADDJABytAgTaQKw0FMhYdTVAFSjsfgEhAC7BAABGAS0BpK0AlMkAhsEB/AJA3HhiASkA4N0B7kCsbDDITG0tGEEg2BIBNQHiwQAAxkE1HGoBLQEawQH8sgE1ABZBLPg42Gh+AMkAFK0AlS0AONkAekE02SUszCIBNQEaQKxkDMhYvgEhAA5BKOgNGJwiwQAARgEtAgQ0rQB+QNyQnsEB/CYAyQBg3QIFYkDccboA3QHWQKxMHMhVEgDJAACtAgTyQKx0AMgx3gCtAGjJAeJA3FUKAN0CBMpBLJA9IGQcyEACARkAAkCsRDoBKQAuwQACBQEB/GoArQAWQNhcGgDJARTZAgSKQRh4FSicZKxQEgEhABZAyDhywQAAMgEtAdytAIZA3IQCwQH8tgDJAGTdAgTVGQAiQRRcEgEpABZBJKQgrG1ewQAB0kEomB4BJQCGwQH9WgCtAAEpAAJBJJBszD1KASUAckEodN4AzQBlKQBSQSSWBRoBFQA1JQACQRBIASCIUMxRGsEAAgTJAfwaAM0AWkCsPToArQIEqkCsWS4ArQIElkDMVSIAzQIEcsEAAC5ArHIEcsEB/IoArQCCQMxgzgEhACDNACURAgSaQSTUJRSYOMxqBEIAzQFqQKxY6gCtAgVSQKxYzRB0ASCsWsEAAFoBFQBZJQHIrQBawQH8lkDMYTIBEQAozQIIEsEAADZArEwUyFQpHICRDGSSASECBNStAC5A3FR+wQH8jgDJABjdAgUWQNxg+gDdAgSSQMhgPKwwxgDJADitAgSqQKxkEMglTgCtAADJAgRaQNxQ+gDdAgSSwQAAJkCsaAzIbgRiAK0APsEB/LIAyQByQNxJAgDdAgUOQNxtAgDdAgRyQKw0EMhk/gDJAECtAgRGwQAAWkCsRADIVfIArQAuwQH8pgDJADENAIEdAWZA3FUOAN0BHkEYdgRmARkBQkCsSHUYOCDIME0MQCbBAAIEqgCtACrBAfz6AMkAikDcFSIA3QIFFkDcQRoA3QIEikDIPSIAyQIEykCsUADIRBbBAAHuAK0AUsEB/ToAyQCeQNwY3gDdAgSWwQAALkCsVCzIUgQOAK0AOsEB/PYAyQAaQNwxGgDdAgSqQNxdWgDdAgRaQMhkPKwwygDJAEytAgRewQAAckCsWDjIYW7BAfxqAQ0ASK0AMRkAJMkB0kDcUSYA3QIIXkDwgBEEsAzkgC7BAAAuQKxQdMhCBE4ArQBGwQH8egDJAOJA3D0iAN0CBJpA3HlKAN0CBCZArFwkyFTeAK0AIMkCBJTlAGZA6GAU+IwSwQAAbkCsOCzIXHYBBQAo8QFcrQBywQH8LgDJAFj5AFDpACJA3FzuAN0CBJpArFgCwQAADkDkiAEEiBjwZEDIUgRqAK0AysEB/CZA3EwOAMkBNN0CBHZA3IjeAN0CBGpArIw8yEyOAK0AWMkB6OUAXsEAAB5AyGA8+MAM6GwsrHhuAQUASPEBNK0AWsEB/F4A+QAsyQA46QBCQNyM2gDdALpA5MF88OSArGQiwQAAGkDIYaUE3gRCAK0AisEB/HYA5QBKQNyIAgDJAKzxACzdAgTSQPzIEgEFANZA3IUWAP0ADN0AikEEgZD8qDoBBQBCQKxQHMg8YgD9AGZBBIgCAK0ARMkBbQUAGkD8oVjILEisPALBAABWAP0AlkDofCD4egQaAK0BLMkAAsEB/F5A3CjSAN0CBKpAyGQ4rFAiwQACBHEB/AIArQDCQNxEqgDJAHDdAgT+QNyA+gDdAgRmQMhUAKxc4gCtACDJAgQGwQAAjkDIXACsWgQGAK0AQsEB/MIAyQFOQNwwzgD5AETdAEjpAgRSQORU1KxYAsEAAD5A8HRIyDC5BKYEYgCtAC7BAfzuQNxURgDJANTdAgUCQNxsTgDxABjlAJDdAgSeQMhQGKws4gDJACitAgRKwQAANkD4eADoRACsZCTIUJYBBQGErQBiwQH8ogDJAAz5ABzpAGJA3E0KAN0CBIpArGABBHgqwQAAHkDIXAzkbADwbgRaAK0A3sEB/A4AyQBOQNxBDgDdAgSiQNxs/gDdAgRqQMhcIKxY3gDJAACtADzlAgRCwQAAPkCsNADoYADITBT4aDIBBQB48QHUrQA2wQH8EgDJAHj5ABTpAKJA3FkiAN0BRkDkXXDweFCsWG7BAAAmQMgxOQSt/gCtAGrBAfymQNxcAgDlADjJAKzdAHjxARUFAV5A/Jws3C0OAP0AQN0AfkEEeXYBBQBKQKw0DPxcaMgsqgD9AACtAFjJADpBBD0qAQUAjkD8dQjIOEysWMIA/QBGwQAAhkDoUBj4UV4ArQFsyQAuwQH8JkDcKSoA3QIEgkCsUBjIXJrBAAGiAK0BAsEB/E4AyQAiQNwxFgDdAgTOQNxU+gDdAgSyQKxEJMgsygCtAEzJAgSiQKwwNMhMzgCtABzpADzJAGT5AgSyQNxBIgDdAghKQKxIcMgo4T0g8gCtAIjJAgRaQNxE7gDdAgTKQNxFEgDdAgS6QKw0AMhJEgCtAADJAgUiQKxEGMgg6gCtAEzJAgRVPQBCQNxFJgDdAgVyQRiQQKwoPQxIVMghvgCtAHzJAT5A3Bi+AN0CBOpA3E0OAN0CBKpAyEQQrEz2AK0AFMkCBMpBILQCAQ0AAkEUgFCsaAzITNIBGQBYyQA4rQIEOkDcXQ4A3QIEGRUAJkEo4ACsbAEYmEzIUCIBIQIEORkAOK0AOSkAikDclH4AyQBs3QIEqkEYoBUpEDzceU4A3QIEIkDIdBCsPNYAyQAorQIEckE5EPisRADIaNYBKQBZGQAsyQDCQT1IcgCtACE5AapBOUQ43HAuAT0A7N0AkTkAFkEpWbIBKQAmQKxcUMhIqTUwISiIGRigWsEAAgQCAK0BLsEB/GZA3Fw2AMkAzN0AsSkCBNpA3GziAN0AbRkB2kEUfAEg3GDIcESsRKoAyQBMrQIEMkEpHBUYvCDIWByseBYBFQBhIQBSwQABagCtALjJAFLBAfwmQNyQQgEpAAEZAJzdAgUeQSCUAKxYLMhYIRRcpsEAAgQOAK0AlsEB/E4AyQAWQNxRHgDdACEVAgUOQRhgLNxIJQw4AgEhAErBAAIEcQH8RgDdAGpArGQgyFjSAK0ASMkAeRkBtkEs9G4BNQB2QMg4AKxdOgCtAHDJAGJBNTQ6AS0BykEtLF4BNQACQNxRJgDdABUNAFpBGRxeAS0BHRkAwkCsSALBAAAOQSkgAMhMDRTMFSDaBJIArQCiwQH8UgDJAFpA3GUOAN0CBOpA3I3OAN0BpkDIcESsMMIAyQBBKQAArQIERkEY5AEo7FCsTBTIUEIBFQBFIQGorQBYyQDtGQACQNyJJgDdAgRWQKxoJMhgMQykARjo1sEAAOoBKQFYrQCeQNyEisEB/GIAyQAg3QIEqkEUqBkIhCIBDQAdGQCaQNxFfgDdAHkVAAJBGMmeARkAVkDIdCysOB0UnMIBCQAUyQBIrQBmQRjQOgEVAcZBFKhGARkAkkDIZBCsUWbBAABmQQy4DgEVAZitAJ7BAfyeAQ0AqMkA1kDcYRYA3QIIKkFtUB1RMAFFGEisfADIjabBAAHOAK0ApsEB/CZA3JiqAVEAFMkAQN0CBFFFADJBSRwNWVwCAW0AQkDcsRYBWQAA3QDBSQG2QKykDMiQ6gCtACTJAgSeQT1MDRTEAsEAABJBIMQkyIQ4rIIEnsEB/AIArQCwyQAqQNyQdgEhAJTdAgRpFQBKQRiUESjYmgE9AAJAyFBErDieASkAJK0AORkALMkB9kDcjPYA3QFSQORw0PCMuQzYINx5DgDdAXzxAQpAyIxcrGSSAMkATK0BvOUAnkD4nADoVESsTCbBAABOQMhIUgENAbytAE7BAfxyAMkAIOkAfkDcXDIA+QDc3QIEOkCsbBjokBUM9FjIRgSaAK0A2kDcfA4AyQDk3QIFDkDcbToA3QIEjkCsWADIPO4ArQAwyQAU6QIEzkDweAzIHACsMADkYU4ArQBkyQFY5QEaQNxJCgDdAgRSwQAAFkDoOCysTBDIRAz4fE4A8QIETK0AasEB/GIA+QAk6QAAyQAuQNw5BgDdAgRWQOhUVNxMAPiBWgDdAgQqQKxEVMggngCtAEENAAzJAgS+QQio1KwoFMgxBgD5Ac0JAACtAADJADZBDNIERQi8IgENAAJA3FjWAOkAeN0AxQkADkD46I4A+QGyQKw0PMg0nQS8AOh4esEAACJA+CYEfgCtAJLBAfwCQNxsJgDJAPTdAgUuQNxtEgDdAFTpAeJA5KQA8JAcyEwOAPkAAkCsTPYArQAMyQCM5QIERkCsRCDofADILF7BAAACAPEAAkD4igQWAK0AvsEB/DoAyQBKQNxUWgD5ANDdAVzpAbJArGAM5DwMyFQs8ExGwQACBNYArQBewQH8QkDccCYAyQEM3QIEjOUAOkDoRGjcfEbBAAEWAPEBvsEB/EYA3QBqQMhILKxQ8gCtABjJAGTpAVpA/RjGAQUAvkDILBSsOV4ArQBMyQAaQQUcQgD9AdZA/UReAQUALkDcLTj5VA4A3QB4/QAU+QGKQKxYGMhEfsEAACJA8ORE+NwM5J4FLgCtAALBAfw6AOUBekDcaKoAyQBk3QIFIkDcXRoA3QIEWkDIYACsMPIAyQAUrQBs+QIEckDINAysMDj4uADojF4A8QA6wQAA4gDJARytAHLBAfxeAOkAJkDcfNYA3QIINkDoxFh8aADclEiYOgROAPkAsH0A+kCsVCIAmQEArQIFgkCscHoA3QA2QOTIJNiMIgDpAHCtAeDlAAJA6MF4fFQMmFhyAOkAIkDksLYAmQAYfQCo2QACQOi0FgDlAUZA5HDKAOkADkB8QFyYPB7BAADyQNzISgDlAgTYfQCewQH8fgDdABSZAQ5ArEUKAK0CDJpBPJw4fFQAmDQBICwdFCQywQACBQEB/AIAfQFGQKw8LgEVADiZAJEhAECtAdU9AQZArFwBGDQZKHTiASkAFK0AQRkCBF5AmEGGAJkCBFpBDHg4mFQA5EAw8EAOwQAAKkB8YT4AfQDewQH8SgCZAAzlAR5ArDAaAPEA9K0BqQ0AXsEAAA5AiEwA6DwcmFQQ+G1GAPkAZsEB/CoA6QDgmQFmQKxQkgCJAGStAgRGQNyYOLRYPMA4KKwtIgCtAQDBAOJAmGQsfDDKAJkADH0AwLUCBApAuGwoyHAcfDgSAN0AAkCYJILBAAFyAH0AzsEB/EIAmQAaQKxUIgC5AJzJAHStAgRyQHxgKJg4qNTU2sEAAgUuQKxdtgCtAC7BAf2yAH0AhJkAEkCsJWIArQIEHkCYSHh8KKoAmQA0fQIEgkB8ZHiYKEbBAABmQMiYygDVAUB9ADLBAfyKAJkAnMkAAkCsUQoArQIEIkCQUBB8eDjVcILBAAIEjgB9AIJArHRSwQH8ngCtATDVAUZArHSywQAAbkDM5gQ2AK0AAsEB/B5A1SQCAM0ADJEBBNUAykDMeP4AzQAmQNTsQJBUwMyUAgDVABSRAgQGwQAAZkCYTFh8TADJDGYAzQIEkMkAEsEB/CIAfQAsmQEuQKxJGgCtAQpA6JEw+LRgfHxEmDRNDKlmwQAAVkEZCgROAH0A7sEB/CJArGxuAJkAwK0CBPT5AFpArJwSAQ0BCK0AWOkCBA5AmLgsfICuAJkAYRkAAH0AckDsyRj4zUUM0LB8aBCYaPEcxgQmwQACBFJArHRaAH0AWJkAZsEB/GYArQIEZkB8dDCYSGbBAAIEXgB9AHLBAfyGQKxcOgCZALytAgUOQKxtCgCtAgSuQHxIIJhI7gB9AACZAgRawQAApkCYTAB8dc7BAfxSAH0AIR0AtO0AAQ0AIPkARJkBCkCsQQ4ArQIEykB8aBCYUNTVQALBAAIEggB9ARrBAfwaQKxcLgCZAPitAgTKQKyhOgCtAgRaQJh8FHxw1gCZACx9AgSqQJhEkHx4PMj8bsEAAGoA1QHQfQESQKyEesEB/AIAmQCErQIERkCQVDh8bJLBAAACQNT8GgDJAgSgfQDeQKxoLsEB/MIAkQAYrQEg1QG+QKxZOMyYJgCtAgQ0zQASQNT0yHxgDgDVAGZAkCSkzIwWAH0ARJEAhM0AVkDU6UjM0BIA1QEWQJA0aHx8FsEAAHIAkQCSQJigcMjcqgCZACjNAgRofQCWwQH8OgDJARJArE0SAK0CBIpA6IUsfGxg+MRcmDVNDMX1GL2ewQABOgB9ANbBAfxeQKxkRgCZAJitAgUdDQAM+QAuQKx06gCtAUTpAf5AmGwkfEDaAJkAeRkALH0BJkDsUUz4VYkMSECYNCB8PH7BAAH2QRyKBC4AfQDwmQBiwQH8AkCsOTIArQIEYsEAACpAfEwgmFoExgB9ACbBAfz6AJkANkCsLRoArQIFJkCsaP4ArQIErkCYUAB8VPYAfQAUmQIERsEAALJAfIAMmEnmAR0AYQ0AAsEB/AIAfQAY7QBk+QC0mQCGQKxZIgCtAgVeQHwwQJA41NTEysEAAgQSAH0A4kCsPA7BAfy6ANUAcK0BAJEBPkDMkUCsISYAzQAgrQACQNS84gDVAVJAzGggkDzeAM0AUJEAAkDU3NIA1QCaQMw6BFbBAAACQJhERHxEiMilJgDNAgRUfQA6wQH8EgDJABSZAW5ArDEeAK0CBEJA7CzYfFCAmDAY+DCVDGzKAJkAZkEceNIAfQIEZkCsUPIArQIFckCsRS4ArQIEUkCYTCB8TPYAmQA4fQIEiQ0AOR0ANkB8ZACYQJIA+QAY7QBkfQA4mQIEkkCsXT4ArQIF6kDUtCR8UCyQMQLBAAIEigB9AC5ArGiCwQH8lgCtACzVATiRAU5AzGTsrDkmAK0AOM0ATkDUqPoA1QDyQJBkGMx4WHwRBgB9AAzNAAyRAE5A1L0CANUAtkDMZciYTAB8RJrBAADaQMhsLgDNAgUgfQBawQH8GgDJAHyZAE5ArD0mAK0CBZ5AmDxMfEws7E28+FhGAH0AcJkA5kEMLcisRDUckOIArQIFRkCsQQoArQIEgkCYTER8HJoAmQBEfQIFGkCYQCB8QRoAfQA0mQIEjkCsRP4ArQIEykB8cByYWY4AfQEkmQF6QKw9AgCtAgTuQKxNfgCtAgRaQJhEAHxRAgCZABB9AgTGQJg8HsEAAAJAfFIEAgB9ABbBAf0KAJkBMkCsMQ4ArQIEJsEAAI5AfHAAmEYEGgB9AALBAfzOAJkBHkCsTQIArQIE2kCsVSIArQIEkkCYWER8GM4AmQBYfQIEpsEAAFZAmFQQfGVyAH0ADsEB/UoAmQEiQKxQ+gCtAgRCwQAAekB8VByYXgQWAH0AyJkAAsEB/SJArCUmAK0CBMJArE0KAK0CBJZAmEgYfDzmAJkASH0CBMbBAAA6QJhMAHwp+gB9ABbBAfwaAJkBzkCsRR4ArQIEnsEAABJAfGBEmEIEDgB9AG7BAfy2AJkA9kCsGQ4ArQIFOkCsQgRCAK0B4kCYPQ4AmQIFckB8KAyYODrBAAFyAH0AcsEB/JIAmQIEGkCsOCbBAAGxAfyyAK0CDFZAmCggfDYFXgB9Ag20mQIY4O0AiPkAZQ0A9R0CMP7BAAIta/y8A'"

let response = {
    "notes": [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 62],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 66, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 66, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 68, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 70, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 74, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 76, 0, 0, 0, 0, 0, 0, 0, 0, 76, 0, 0, 0],
        [78, 0, 78, 0, 0, 0, 78, 0, 0, 0, 78, 0, 0, 0, 78, 0]
    ],
    "name": "Stair",
    "duration": 12
}
let defaultFrequenciesList = [];
for (let midiNote = 48; midiNote < 80; midiNote += 2) {
    const freq = Math.pow(2, (midiNote-69)/12)*440;
    defaultFrequenciesList.push(freq);
}
console.log(defaultFrequenciesList);
// notes.forEach((note) => {
//     note.addEventListener('mouseenter', () => {
//         playSound(note);
//         setTimeout(hideGlow, 300);
//     })
// })
  
// function playSound(note) {
//     let sound = new AM(context);
//     let value = note.dataset.frequency;
//     AM.play(value);
//     AM.stop();
// }


class Track {
    constructor(audioCtx){
        this.context = audioCtx
        this.oscillators = []
        this.ongoing = [] // list of 1 (started) and 0 (stopped) oscillators
        this.gainNodes = []
        this.length = 2;
        this.eps = 0.2;
    }

    init(nrOsc){
        for(let i=0; i< nrOsc; i++){ // create oscs, gains, connect them to audCtx.dest
            this.oscillators.push(this.context.createOscillator());
            this.gainNodes.push(this.context.createGain());
            this.oscillators[i].connect(this.gainNodes[i])
            this.gainNodes[i].connect(this.context.destination)
            // this.oscillators[i].type = 'sine'; // 'sine' by default
        }
    }
    loadDefaultOscillators(defaultFrequenciesList){ //set the frequency of each osc
        for (let i = 0; i < 16; i++) {
            this.oscillators[i].frequency.value = defaultFrequenciesList[i];
            
        }
    }

    loadTrack(partiture, oscillatorId, duration){ // not working yet
        let time = this.context.currentTime // + this.eps
        let singleDuration = duration / partiture.length
        console.log(time, duration, singleDuration)
        
        
        for(let i=0; i<partiture.length; i++){
            
            // use ongoing ?
            
            if(i!=0){
                try{
                    this.oscillators[oscillatorId].start(time + i*singleDuration)
                    this.ongoing[oscillatorId] = 1
                    this.gainNodes[oscillatorId].gain.setValueAtTime(1, time + i*singleDuration);
                }
                catch (err){
                    console.log(err)
                }
            } 
            else{
                try{
                    this.gainNodes[oscillatorId].gain.exponentialRampToValueAtTime(0.001, time + i*singleDuration);
                    this.oscillators[oscillatorId].stop(time + i*singleDuration)
                    this.ongoing[oscillatorId] = 0;
                }
                catch (error){
                    console.log(error)
                }
            } 
        }
    }
    loadOldPartiture(notes, duration){ // old scheduler.. working
        let time = this.context.currentTime // + this.eps
        let singleDuration = duration / notes[0].length
        console.log(time, duration, singleDuration)

        for (let i = 0; i < 16; i++) {
            this.oscillators[i].start(time)
            this.gainNodes[i].gain.setValueAtTime(0, time-this.eps);
            if (notes[i][0] != 0) {
                console.log(`osc${i} started at ${this.context.currentTime}`)
                try {
                    this.gainNodes[i].gain.linearRampToValueAtTime(1, time);
                    this.ongoing[i] = 1
                    // if (this.ongoing.some((el) => { return el != 0 })
                }
                catch (error) {
                    console.log(error)
                }
                console.log("started")
            }
            else {
                this.ongoing[i] = 0;
                console.log("no first note")
            }
        }
        // SCHEDULER 
        for (let i = 0; i < 16; i++) {
            for (let j = 1; j < notes[i].length; j++) {
                if (notes[i][j] === 0 && this.ongoing[i] == 1) {
                    console.log("i,j: ", i, j)
                    console.log(`osc${i} stopped at ${time + singleDuration * j}`)
                    try {
                        // this.oscillators[i].stop(time + singleDuration * j)
                        // this.gainNodes[i].gain.setValueAtTime(1, time+singleDuration*j-this.eps);
                        this.gainNodes[i].gain.linearRampToValueAtTime(0, time + singleDuration * j);
                        this.ongoing[i] = 0
                    }
                    catch (error) {
                        console.log(error)
                    }
                }
                else {
                    if (notes[i][j] !== 0 && this.ongoing[i] == 0) {
                        console.log("merge pe ", i)
                        console.log(`osc${i} started at ${singleDuration * j}`)
                        try {
                            this.gainNodes[i].gain.setValueAtTime(0, time + singleDuration * j - this.eps);
                            this.gainNodes[i].gain.linearRampToValueAtTime(1, time + singleDuration * j);
                           
                            this.ongoing[i] = 1
                        }
                        catch (error) {
                            console.log(error)
                        }
                    }
                }
            }

        }
        // stop all remaining
        for (let i = 0; i < 16; i++) {
            if (this.ongoing[i] === 1) {
                console.log(`osc${i} stopped at ${time + duration}`)
                try {
                    // this.oscillators[i].stop(time + duration)
                    this.gainNodes[i].gain.setValueAtTime(0, time+duration - this.eps);
                    this.gainNodes[i].gain.linearRampToValueAtTime(0, time+duration);
                }
                catch (error) {
                    console.log(error)
                }
                
                this.ongoing[i] = 0
            }
            this.oscillators[i].stop(time+duration + this.eps)
        }
        // for (let i = 0; i < trackFrequencies.length; i++) {
        //     osc.frequency.setValueAtTime(trackFrequencies[i], time + i * singleDuration)
        // }
    }
    
    isStarted(){
        return this.isPlaying
    }
    stopPartiture(){
        let time = _audioContext.currentTime
        for (let i = 0; i < _oscillators.length; i++) {
            try {
                _oscillators[i].stop(time)
            }
            catch (error) {
                console.log(error)
            }
        }
    }
    show(){
        console.log("oscilators, gains: ", this.oscillators, this.gainNodes)
    }
}

class AudioManager {
    constructor(audioContext){
        this.audioCtx = audioContext;
        this.tracks = [];
        this.isPlaying = 0;
        this.audios = [];
        console.log("at creation: ", this.audioCtx);
    }

    addTrack(defaultFreqsList, partiture){
        let trk = new Track(this.audioCtx)
        trk.init(16)
        trk.loadDefaultOscillators(defaultFrequenciesList)

        this.tracks.push(trk)
        partiture["notes"].forEach((el,idx)=>{
            // trk.loadTrack(el, idx, partiture["duration"])
            trk.loadOldPartiture(partiture["notes"], partiture["duration"])
            this.isPlaying = true;
        })

        return this.tracks.length - 1
    }
        
    getContext(){
        return this.audioCtx
    }
    isStarted(){
        return this.isPlaying
    }
    stopAll(){
        this.tracks.forEach((trk)=>{
            trk.oscillators.forEach((o)=>{
                o.stop()
            })
        })
        this.isPlaying = false;
    }
    
    addAudio(audio){
        this.audios.push(audio)
        try {
            const track = this.audioCtx.createMediaElementSource(audio)
            track.connect(this.audioCtx.destination)
            console.log("track added: ", track)
        }
        catch (error) {
            console.log(error)
        }
    }
    getAudios(){
        return this.audios
    }
    getTracks(){
        return this.tracks
    }
    show(){
        console.log("tracks/audios: ", this.tracks, this.audios)
    }

    // ????
    play(idx, value) { // proto - not used
        this.init();
        
        this.oscillators[idx].frequency.value = value;
        this.gainNodes[idx].gain.setValueAtTime(0, this.audioCtx.currentTime);
        this.gainNodes[idx].gain.linearRampToValueAtTime(1, this.audioCtx.currentTime + 0.01);
                
        this.oscillators[idx].start(this.audioCtx.currentTime);
        this.stop(this.audioCtx.currentTime);
    }
    stop() { // proto - not used
        this.gainNodes.gain.exponentialRampToValueAtTime(0.001, this.context.currentTime + 1);
        this.oscillator.stop(this.context.currentTime + 1);
    }
    playTrack(id){ // ?
        this.tracks[id].play();
    }
    stopPartiture(id){ // ?
        this.tracks[id].stopPartiture()
    }
    exists(trackId){ // ?
        return this.tracks.length > track
    }
    resume() {
        this.audioCtx.resume()
        console.log("context resumed with state: ")
    }
    suspend() {
        this.audioCtx.suspend()
        console.log("context suspended with state: ")
    }

    playPause(id, partiture){ // ?
        console.log(`oscillator state for ${id} : `, _managers[id].checkOscillatorState())
        if (_managers[id].checkOscillatorState() === false) {
            try {
                _managers[id].loadPartiture(partiture);
            }
            catch (error) {
                console.log(error)
            }

        }
        else {
            console.log("is it stopping?")
            try {
                _managers[id].stopPartiture()
            }
            catch (error) {
                console.log(error)
            }

        }
    }
}

window.onload = function(){
    let ctx = new (window.AudioContext || window.webkitAudioContext)();
    let AM = new AudioManager(ctx)
    
    const audioElements = document.querySelectorAll('audio');
    audioElements.forEach(element => {
        AM.addAudio(element)
    });
    console.log(AM.getAudios())
    AM.show()

    var wavesurfer1 = WaveSurfer.create({
        container: '#waveform1',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        // crossOrigin: 'anonymous',
        autoCenter: 'true'
    });
    var wavesurfer2 = WaveSurfer.create({
        container: '#waveform2',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true'
    });
    var wavesurfer3 = WaveSurfer.create({
        container: '#waveform3',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true'
    });
    var wavesurfer4 = WaveSurfer.create({
        container: '#waveform4',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true'
    });
    
    wavesurfer1.load("http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3");
    wavesurfer2.load("http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3");
    wavesurfer3.load("http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3");
    wavesurfer4.load("http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3");

    var wavePartitura1 = WaveSurfer.create({
        container: '#partitura1',
        waveColor: '#ffcb0c',
        progressColor: 'green',
        cursorColor: '#ffcb0c',
        crossOrigin: 'anonymous',
        autoCenter: 'true',
        barWidth: "6"
    });
    var wavePartitura2 = WaveSurfer.create({
        container: '#partitura2',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true',
        barWidth: "6"
    });
    var wavePartitura3 = WaveSurfer.create({
        container: '#partitura3',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true',
        barWidth: "6"
    });
    var wavePartitura4 = WaveSurfer.create({
        container: '#partitura4',
        waveColor: '#ffcb0c',
        cursorColor: '#ffcb0c',
        progressColor: 'green',
        autoCenter: 'true',
        barWidth: "6"
    });

    let main = document.getElementById("main");
    main.addEventListener("click", function(e){
        console.log(e.target.id)
        switch(e.target.id){
            case "instrument1":
                // Create an empty three-second stereo buffer at the sample rate of the AudioContext
                var myArrBuffer = _audioContext.createBuffer(2, _audioContext.sampleRate * 3, _audioContext.sampleRate);
                // Fill the buffer with white noise;
                // just random values between -1.0 and 1.0
                for (var channel = 0; channel < myArrBuffer.numberOfChannels; channel++) {
                    // This gives us the actual array that contains the data
                    var nowBuffering = myArrBuffer.getChannelData(channel);
                    for (var i = 0; i < myArrBuffer.length; i++) {
                    // Math.random() is in [0; 1.0]
                    // audio needs to be in [-1.0; 1.0]
                    nowBuffering[i] = Math.random() * 2 - 1;
                    }
                }
                // Get an AudioBufferSourceNode.
                // This is the AudioNode to use when we want to play an AudioBuffer
                source = _audioContext.createBufferSource();
                // set the buffer in the AudioBufferSourceNode
                source.buffer = myArrBuffer
                source.connect(_audioContext.destination)
                source.start()
                // _audioContext.decodeAudioData(binary.buffer, 
                //     function(buffer) {
                //         source.buffer = buffer;
                //         source.connect(_audioContext.destination);            
                //     },
                //     function(e){ console.log("Error with decoding audio data" + e.err);}
                // )
                // wavesurfer1.loadArrayBuffer(binary.buffer);
                // wavesurfer1.loadDecodedBuffer(binary.buffer)
                // wavesurfer1.loadBlob(blobUrl)
                // wavesurfer1.on('ready', function () {
                //     console.log("READY")
                // //     wavesurfer1.play();
                // });
                break;

            case "waveform1":
                break;
            case "instrument2":
                break
            case "play-pause-btn":
                let playPauseBtn = document.getElementById('play-pause-btn')
                break;
            case "loadall-btn":
                let loadallBtn = document.getElementById("loadall-btn")
                console.log("status:", AM.isStarted())
                if(AM.isStarted()){
                    AM.stopAll()
                    loadallBtn.textContent = "START"
                }
                else{
                    loadallBtn.textContent = "STOP"
                    // next function has a bug if i place the line above after it
                    AM.addTrack(defaultFrequenciesList, response) // params hardcoded atm                
                    
                }
                break;
            default:
                break
        }  
    });
}

